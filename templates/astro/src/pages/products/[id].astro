---
import Header from '../../components/Header.astro'
import Container from '../../components/Container.astro'
import AddToCart from '../../components/AddToCart.svelte'
import { getProduct } from '../../models/product'
import '../../styles/common.css'

const id = Astro.params.id
const product = await getProduct(id)

if (!product) {
  return new Response(null, {
    status: 301,
    headers: {
      Location: '/'
    }
  })
}
---

<html lang="en">
  <head>
    <title>{product.name} | Online Store</title>
    <style>
      h2 {
        text-align: center;
        font-size: 3.5rem;
      }

      figure {
        display: grid;
        grid-template-columns: 1fr 1fr;
      }

      img {
        width: 400px;
      }
    </style>
  </head>
  <body>
    <Header />

    <Container tag="article">
      <h2>{product.name}</h2>
      <figure>
        <img src={product.image} />
        <figcaption>
          <AddToCart client:idle id={product.id} name={product.name} />
          <p>Description here...</p>
        </figcaption>
      </figure>
    </Container>
  </body>
</html>
